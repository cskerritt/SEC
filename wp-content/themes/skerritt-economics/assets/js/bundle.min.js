document.addEventListener('DOMContentLoaded',function(){const mobileMenuToggle=document.querySelector('.mobile-menu-toggle');const navMenu=document.querySelector('.nav-menu');if(mobileMenuToggle){mobileMenuToggle.addEventListener('click',function(){navMenu.classList.toggle('active');this.classList.toggle('active');document.body.classList.toggle('menu-open')})}const navLinks=document.querySelectorAll('.nav-menu a');navLinks.forEach(link=>{link.addEventListener('click',function(){navMenu.classList.remove('active');mobileMenuToggle.classList.remove('active');document.body.classList.remove('menu-open')})});document.addEventListener('click',function(event){if(!event.target.closest('.nav-wrapper')){navMenu.classList.remove('active');mobileMenuToggle.classList.remove('active');document.body.classList.remove('menu-open')}});document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior: 'smooth',block: 'start'})}})});let lastScrollTop=0;const nav=document.querySelector('.main-nav');let ticking=false;function updateNavOnScroll(){let scrollTop=window.pageYOffset || document.documentElement.scrollTop;if(scrollTop > lastScrollTop && scrollTop > 100){nav.style.transform='translateY(-100%)'}else{nav.style.transform='translateY(0)'}if(scrollTop > 10){nav.classList.add('scrolled')}else{nav.classList.remove('scrolled')}lastScrollTop=scrollTop;ticking=false}const observerOptions={threshold: 0.1,rootMargin: '0px 0px -50px 0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('fade-in-up');observer.unobserve(entry.target)}})},observerOptions);const elementsToAnimate=document.querySelectorAll('.service-card,.benefit-card,.testimonial,.case-study,.publication-card,.location-card');elementsToAnimate.forEach(el=>{const rect=el.getBoundingClientRect();if(rect.top > window.innerHeight){el.style.opacity='0';el.style.transform='translateY(20px)';observer.observe(el)}});window.addEventListener('scroll',function(){if(!ticking){window.requestAnimationFrame(updateNavOnScroll);ticking=true}});const lazyImages=document.querySelectorAll('img[data-src]');if('IntersectionObserver' in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.removeAttribute('data-src');imageObserver.unobserve(img)}})});lazyImages.forEach(img=> imageObserver.observe(img))}const forms=document.querySelectorAll('form');forms.forEach(form=>{form.addEventListener('submit',function(e){const submitBtn=form.querySelector('button[type="submit"]');if(submitBtn){submitBtn.classList.add('loading');submitBtn.disabled=true}});const inputs=form.querySelectorAll('input[required],textarea[required]');inputs.forEach(input=>{input.addEventListener('blur',function(){if(this.value.trim()===''){this.classList.add('error');this.classList.remove('success')}else{this.classList.remove('error');this.classList.add('success')}});input.addEventListener('input',function(){if(this.classList.contains('error')&& this.value.trim()!==''){this.classList.remove('error');this.classList.add('success')}})})});const buttons=document.querySelectorAll('.btn,button');buttons.forEach(button=>{button.addEventListener('click',function(e){const ripple=document.createElement('span');const rect=this.getBoundingClientRect();const size=Math.max(rect.width,rect.height);const x=e.clientX - rect.left - size / 2;const y=e.clientY - rect.top - size / 2;ripple.style.width=ripple.style.height=size + 'px';ripple.style.left=x + 'px';ripple.style.top=y + 'px';ripple.classList.add('ripple');this.appendChild(ripple);setTimeout(()=>{ripple.remove()},600)})});const faqItems=document.querySelectorAll('.faq-item');faqItems.forEach(item=>{const summary=item.querySelector('summary');summary.addEventListener('click',function(e){e.preventDefault();faqItems.forEach(otherItem=>{if(otherItem !==item && otherItem.hasAttribute('open')){otherItem.removeAttribute('open')}});if(item.hasAttribute('open')){item.removeAttribute('open')}else{item.setAttribute('open','')}})})});document.addEventListener('DOMContentLoaded',function(){const contactForm=document.getElementById('contactForm');if(contactForm){const useJavaScriptSubmission=false;contactForm.addEventListener('submit',function(e){if(!useJavaScriptSubmission){if(typeof trackFormSubmission==='function'){trackFormSubmission('consultation_request')}return true}e.preventDefault();const formData=new FormData(contactForm);const formObject={};for(let [key,value] of formData.entries()){formObject[key]=value}const requiredFields=['name','email','case-type','message'];let isValid=true;requiredFields.forEach(field=>{const input=document.getElementById(field);if(!formObject[field] || formObject[field].trim()===''){input.style.borderColor='var(--accent-color)';isValid=false}else{input.style.borderColor='var(--success)'}});const emailInput=document.getElementById('email');const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(formObject.email)){emailInput.style.borderColor='var(--accent-color)';isValid=false}if(!isValid){showMessage('Please fill in all required fields correctly.','error');return}const submitButton=contactForm.querySelector('button[type="submit"]');const originalText=submitButton.textContent;submitButton.textContent='Sending...';submitButton.disabled=true;fetch('https: method: 'POST',body: formData,headers:{'Accept': 'application/json'}}).then(response=>{submitButton.textContent=originalText;submitButton.disabled=false;if(response.ok){contactForm.reset();showMessage('Thank you for your consultation request. We will respond within 24 hours.','success');requiredFields.forEach(field=>{const input=document.getElementById(field);input.style.borderColor=''});emailInput.style.borderColor=''}else{response.json().then(data=>{if(data.errors){showMessage('Please check your form entries and try again.','error')}else{showMessage('There was an error sending your message. Please try again.','error')}})}}).catch(error=>{console.error('Error:',error);submitButton.textContent=originalText;submitButton.disabled=false;showMessage('There was an error sending your message. Please try again or contact us directly.','error')})})}const formInputs=document.querySelectorAll('#contactForm input,#contactForm select,#contactForm textarea');formInputs.forEach(input=>{input.addEventListener('blur',function(){validateField(this)});input.addEventListener('input',function(){if(this.style.borderColor==='var(--accent-color)'){this.style.borderColor=''}})})});function validateField(field){const value=field.value.trim();const fieldName=field.name;const requiredFields=['name','email','case-type','message'];if(requiredFields.includes(fieldName)&& value===''){field.style.borderColor='var(--accent-color)';return false}if(fieldName==='email'){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){field.style.borderColor='var(--accent-color)';return false}}if(fieldName==='phone' && value !==''){const phoneRegex=/^[\+]?[1-9][\d]{0,15}$/;const cleanPhone=value.replace(/[\s\-\(\)\.]/g,'');if(!phoneRegex.test(cleanPhone)){field.style.borderColor='var(--accent-color)';return false}}if(value !==''){field.style.borderColor='var(--success)'}else{field.style.borderColor=''}return true}function showMessage(message,type){const existingMessage=document.querySelector('.form-message');if(existingMessage){existingMessage.remove()}const messageDiv=document.createElement('div');messageDiv.className=`form-message ${type}`;messageDiv.textContent=message;messageDiv.style.cssText=` padding: 1rem 1.5rem;border-radius: 6px;margin-bottom: 1.5rem;font-weight: 500;text-align: center;${type==='success' ? 'background-color: #d1fae5;color: #065f46;border: 1px solid #a7f3d0;' : 'background-color: #fee2e2;color: #991b1b;border: 1px solid #fca5a5;'}animation: slideIn 0.3s ease-out;`;const form=document.getElementById('contactForm');form.insertBefore(messageDiv,form.firstChild);setTimeout(()=>{if(messageDiv.parentNode){messageDiv.style.opacity='0';messageDiv.style.transform='translateY(-10px)';setTimeout(()=> messageDiv.remove(),300)}},5000)}const style=document.createElement('style');style.textContent=` @keyframes slideIn{from{opacity: 0;transform: translateY(-10px)}to{opacity: 1;transform: translateY(0)}}.form-message{transition: opacity 0.3s ease,transform 0.3s ease}`;document.head.appendChild(style);document.addEventListener('DOMContentLoaded',function(){const filterButtons=document.querySelectorAll('.filter-btn');const caseCards=document.querySelectorAll('.case-study-card');filterButtons.forEach(button=>{button.addEventListener('click',function(){const filter=this.getAttribute('data-filter');filterButtons.forEach(btn=> btn.classList.remove('active'));this.classList.add('active');caseCards.forEach(card=>{const category=card.getAttribute('data-category');if(filter==='all' || category===filter){card.classList.remove('hidden');card.classList.add('visible')}else{card.classList.add('hidden');card.classList.remove('visible')}})})});caseCards.forEach(card=>{card.classList.add('visible')})});