document.addEventListener('DOMContentLoaded',function (){const  mobileMenuToggle=document.querySelector('.mobile-menu-toggle');const  navMenu=document.querySelector('.nav-menu');const  mobileNavOverlay=document.createElement('div');mobileNavOverlay.className='mobile-nav-overlay';document.body.appendChild(mobileNavOverlay);if (mobileMenuToggle&&navMenu){mobileMenuToggle.addEventListener('click',function (){navMenu.classList.toggle('active');mobileNavOverlay.classList.toggle('active');this.classList.toggle('active');const  expanded=this.getAttribute("aria-expanded")==="true";this.setAttribute("aria-expanded",!expanded);document.body.classList.toggle('menu-open');});}const  dropdowns=document.querySelectorAll('.has-dropdown');dropdowns.forEach(dropdown=>{const  link=dropdown.querySelector('a');if (link&&window.innerWidth<=768){link.addEventListener('click',function (e){if (dropdown.querySelector('.dropdown')){e.preventDefault();dropdown.classList.toggle('active');}});}});const  navLinks=document.querySelectorAll('.nav-menu a');navLinks.forEach(link=>{link.addEventListener('click',function (e){if (window.innerWidth>768){if (scrollTop>lastScrollTop&&scrollTop>100){nav.style.transform='translateY(-100%)';}else {nav.style.transform='translateY(0)';}}if (scrollTop>10){nav.classList.add('scrolled');}else {nav.classList.remove('scrolled');}lastScrollTop=scrollTop;ticking=false;}const  observerOptions={threshold:0.1,rootMargin :'0px 0px -50px 0px'};const  observer=new  IntersectionObserver((entries)=>{entries.forEach(entry =>{if (entry .isIntersecting){entry .target.classList.add('fade-in-up');observer.unobserve(entry .target);}});},observerOptions);const  elementsToAnimate=document.querySelectorAll('.service-card, .benefit-card, .testimonial, .case-study, .publication-card, .location-card');if (!heading.id){heading.id='heading-'+index;}const  listItem=document.createElement('li');const  link=document.createElement('a');link.href='#'+heading.id;link.textContent=heading.textContent;link.className=heading.tagName.toLowerCase()==='h2'?'toc-h2':heading.tagName.toLowerCase()==='h3'?'toc-h3':'toc-h4';listItem.appendChild(link);tocList.appendChild(listItem);});tocContent.appendChild(tocList);tocContainer.appendChild(tocHeader);tocContainer.appendChild(tocContent);const  mainContent=document.querySelector('main')||document.querySelector('.container');const  firstP=mainContent?.querySelector('p');if (firstP){firstP.parentNode.insertBefore(tocContainer,firstP.nextSibling);}else  if (mainContent){mainContent.insertBefore(tocContainer,mainContent.firstChild);}tocHeader.addEventListener('click',function (){tocContainer.classList.toggle('collapsed');});const  updateActiveTOC=()=>{const  scrollPosition=window.scrollY+100;let  activeHeading=null;headings.forEach(heading=>{if (heading.offsetTop<=scrollPosition){activeHeading=heading;}});tocList.querySelectorAll('a').forEach(link=>link.classList.remove('active'));if (activeHeading){const  activeLink=tocList.querySelector(`a[href=__STRING_12__]`);if (activeLink)activeLink.classList.add('active');}};window.addEventListener('scroll',updateActiveTOC);updateActiveTOC();}function  createBackToTopButton(){const  backToTopBtn=document.createElement('button');backToTopBtn.className='back-to-top';backToTopBtn.innerHTML='â†‘';backToTopBtn.setAttribute('aria-label','Back to top');backToTopBtn.setAttribute('title','Back to top');document.body.appendChild(backToTopBtn);const  toggleBackToTop=()=>{if (window.scrollY>300){backToTopBtn.classList.add('visible');}else {backToTopBtn.classList.remove('visible');}};backToTopBtn.addEventListener('click',()=>{window.scrollTo({top:0,behavior:'smooth'});});window.addEventListener('scroll',toggleBackToTop);toggleBackToTop();}function  initializeAccordions(){const  accordions=document.querySelectorAll('.accordion');accordions.forEach(accordion=>{const  header=accordion.querySelector('.accordion-header');if (header){header.addEventListener('click',function (){accordion.classList.toggle('open');const  group=accordion.closest('.accordion-group');if (group){const  siblings=group.querySelectorAll('.accordion');siblings.forEach(sibling=>{if (sibling!==accordion){sibling.classList.remove('open');}});}});}});}function  enhanceMobileForms(){const  forms=document.querySelectorAll('form');forms.forEach(form=>{const  formGroups=form.querySelectorAll('.form-group');formGroups.forEach(group=>{if (window.innerWidth<=768){group.classList.add('mobile-form-group');}});const  inputs=form.querySelectorAll('input, textarea, select');inputs.forEach(input=>{input.addEventListener('focus',function (){if (window.innerWidth<=768){setTimeout(()=>{this.scrollIntoView({behavior:'smooth',block:'center'});},300);}});});});}function  enhanceTouchTargets(){const  clickableElements=document.querySelectorAll('a, button, .clickable, .btn');clickableElements.forEach(element=>{element.classList.add('touch-target');});}function  optimizeViewport(){let  viewportMeta=document.querySelector('meta[name=__STRING_13__]');if (viewportMeta){viewportMeta.setAttribute('content','width=device-width, initial-scale=1.0, user-scalable=yes, viewport-fit=cover');}else {}}});});}enhanceFormVisuals();});