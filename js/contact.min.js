document.addEventListener('DOMContentLoaded',function(){const contactForm=document.getElementById('contactForm');if(contactForm){const useJavaScriptSubmission=false;contactForm.addEventListener('submit',function(e){if(!useJavaScriptSubmission){if(typeof trackFormSubmission==='function'){trackFormSubmission('consultation_request')}return true}e.preventDefault();const formData=new FormData(contactForm);const formObject={};for(let [key,value] of formData.entries()){formObject[key]=value}const requiredFields=['name','email','case-type','message'];let isValid=true;requiredFields.forEach(field=>{const input=document.getElementById(field);if(!formObject[field] || formObject[field].trim()===''){input.style.borderColor='var(--accent-color)';isValid=false}else{input.style.borderColor='var(--success)'}});const emailInput=document.getElementById('email');const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(formObject.email)){emailInput.style.borderColor='var(--accent-color)';isValid=false}if(!isValid){showMessage('Please fill in all required fields correctly.','error');return}const submitButton=contactForm.querySelector('button[type="submit"]');const originalText=submitButton.textContent;submitButton.textContent='Sending...';submitButton.disabled=true;fetch('https: method: 'POST',body: formData,headers:{'Accept': 'application/json'}}).then(response=>{submitButton.textContent=originalText;submitButton.disabled=false;if(response.ok){contactForm.reset();showMessage('Thank you for your consultation request. We will respond within 24 hours.','success');requiredFields.forEach(field=>{const input=document.getElementById(field);input.style.borderColor=''});emailInput.style.borderColor=''}else{response.json().then(data=>{if(data.errors){showMessage('Please check your form entries and try again.','error')}else{showMessage('There was an error sending your message. Please try again.','error')}})}}).catch(error=>{console.error('Error:',error);submitButton.textContent=originalText;submitButton.disabled=false;showMessage('There was an error sending your message. Please try again or contact us directly.','error')})})}const formInputs=document.querySelectorAll('#contactForm input,#contactForm select,#contactForm textarea');formInputs.forEach(input=>{input.addEventListener('blur',function(){validateField(this)});input.addEventListener('input',function(){if(this.style.borderColor==='var(--accent-color)'){this.style.borderColor=''}})})});function validateField(field){const value=field.value.trim();const fieldName=field.name;const requiredFields=['name','email','case-type','message'];if(requiredFields.includes(fieldName)&& value===''){field.style.borderColor='var(--accent-color)';return false}if(fieldName==='email'){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){field.style.borderColor='var(--accent-color)';return false}}if(fieldName==='phone' && value !==''){const phoneRegex=/^[\+]?[1-9][\d]{0,15}$/;const cleanPhone=value.replace(/[\s\-\(\)\.]/g,'');if(!phoneRegex.test(cleanPhone)){field.style.borderColor='var(--accent-color)';return false}}if(value !==''){field.style.borderColor='var(--success)'}else{field.style.borderColor=''}return true}function showMessage(message,type){const existingMessage=document.querySelector('.form-message');if(existingMessage){existingMessage.remove()}const messageDiv=document.createElement('div');messageDiv.className=`form-message ${type}`;messageDiv.textContent=message;messageDiv.style.cssText=` padding: 1rem 1.5rem;border-radius: 6px;margin-bottom: 1.5rem;font-weight: 500;text-align: center;${type==='success' ? 'background-color: #d1fae5;color: #065f46;border: 1px solid #a7f3d0;' : 'background-color: #fee2e2;color: #991b1b;border: 1px solid #fca5a5;'}animation: slideIn 0.3s ease-out;`;const form=document.getElementById('contactForm');form.insertBefore(messageDiv,form.firstChild);setTimeout(()=>{if(messageDiv.parentNode){messageDiv.style.opacity='0';messageDiv.style.transform='translateY(-10px)';setTimeout(()=> messageDiv.remove(),300)}},5000)}const style=document.createElement('style');style.textContent=` @keyframes slideIn{from{opacity: 0;transform: translateY(-10px)}to{opacity: 1;transform: translateY(0)}}.form-message{transition: opacity 0.3s ease,transform 0.3s ease}`;document.head.appendChild(style);