/* =============================================
   DESKTOP DROPDOWN FIX - CRITICAL
   Fixes dropdown visibility and z-index issues
   Desktop only (769px+) - Mobile untouched
   ============================================= */

/* Desktop-only dropdown fixes */
@media (min-width: 769px) {
    
    /* CRITICAL: Fix nav container overflow */
    .main-nav {
        position: sticky !important;
        top: 0;
        z-index: 9999 !important; /* Very high z-index */
        background: white;
        overflow: visible !important; /* Allow dropdowns to show */
    }
    
    .main-nav .container {
        overflow: visible !important;
        position: relative;
        z-index: 9999;
    }
    
    .nav-wrapper {
        overflow: visible !important;
        position: relative;
        z-index: 9999;
    }
    
    /* Ensure nav menu allows overflow */
    .nav-menu {
        overflow: visible !important;
        position: relative;
        z-index: 9999;
    }
    
    /* Fix dropdown parent items */
    .nav-menu .has-dropdown {
        position: relative !important;
        overflow: visible !important;
        z-index: 9999;
    }
    
    /* CRITICAL: Fix dropdown positioning and visibility */
    .nav-menu .dropdown,
    .has-dropdown .dropdown,
    .nav-menu .has-dropdown .dropdown,
    ul.dropdown {
        /* Positioning */
        position: absolute !important;
        top: 100% !important;
        left: 0 !important;
        transform: translateY(0) !important;
        
        /* Visibility - hidden by default */
        opacity: 0 !important;
        visibility: hidden !important;
        pointer-events: none !important;
        
        /* Styling */
        background: white !important;
        min-width: 250px !important;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 8px !important;
        padding: 0.5rem 0 !important;
        
        /* Z-index - extremely high to appear above everything */
        z-index: 99999 !important;
        
        /* Transition */
        transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease !important;
    }
    
    /* Show dropdown on hover - CRITICAL */
    .nav-menu .has-dropdown:hover .dropdown,
    .nav-menu .has-dropdown:focus-within .dropdown,
    .has-dropdown:hover > .dropdown,
    .has-dropdown:focus-within > .dropdown {
        opacity: 1 !important;
        visibility: visible !important;
        pointer-events: auto !important;
        transform: translateY(0) !important;
        z-index: 99999 !important;
    }
    
    /* Ensure dropdown items are properly styled */
    .dropdown li {
        list-style: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    .dropdown li a {
        display: block !important;
        padding: 0.625rem 1.25rem !important;
        color: #4b5563 !important;
        font-size: 0.9rem !important;
        font-weight: 400 !important;
        text-decoration: none !important;
        transition: all 0.15s ease !important;
        white-space: nowrap !important;
    }
    
    .dropdown li a:hover {
        background-color: #f3f4f6 !important;
        color: #1e40af !important;
    }
    
    /* Fix Services dropdown specifically */
    .nav-menu > li:nth-child(2) .dropdown {
        left: 0 !important;
        right: auto !important;
    }
    
    /* Fix Practice Areas dropdown specifically */
    .nav-menu > li:nth-child(3) .dropdown {
        left: 0 !important;
        right: auto !important;
        min-width: 280px !important;
    }
    
    /* Ensure dropdowns stay within viewport */
    @media (min-width: 769px) and (max-width: 1024px) {
        .dropdown {
            min-width: 220px !important;
        }
    }
    
    /* Add invisible hover bridge to prevent dropdown from closing */
    .has-dropdown::after {
        content: '';
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        height: 10px;
        background: transparent;
        z-index: 9998;
    }
    
    /* Fix any section that might overlap */
    section,
    .hero-section,
    .content-section,
    main,
    .container:not(.main-nav .container) {
        position: relative !important;
        z-index: 1 !important;
    }
    
    /* Ensure dropdown arrow doesn't interfere */
    .nav-menu .has-dropdown > a {
        position: relative;
        padding-right: 1.75rem !important;
    }
    
    .nav-menu .has-dropdown > a::after {
        position: absolute;
        right: 0.5rem;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none; /* Arrow doesn't block clicks */
    }
}

/* Extra specificity for stubborn elements */
@media (min-width: 769px) {
    body .main-nav .nav-menu .has-dropdown:hover .dropdown,
    body .main-nav .nav-menu .has-dropdown:focus-within .dropdown {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        z-index: 99999 !important;
    }
}

/* Debug helper - uncomment to see dropdown boundaries */
/*
@media (min-width: 769px) {
    .dropdown {
        border: 2px solid red !important;
    }
    .has-dropdown {
        border: 2px solid blue !important;
    }
}
*/

/* Ensure nothing in mobile is affected */
@media (max-width: 768px) {
    /* This file does not modify mobile behavior */
    /* Mobile dropdowns continue to work as configured in other CSS files */
}